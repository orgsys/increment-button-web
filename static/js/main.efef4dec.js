(()=>{"use strict";var e={9707:(e,t,r)=>{r.r(t),r.d(t,{default:()=>w});var n=r(467),o=r(296),a=r(3117),i=r(4890),l=r(6283),s=r(3929),u=r(530),c=(r(9558),r(1087)),f=r(8537),d="https://iwivbaqinknurdbkndre.supabase.co";console.log("Supabase URL:",d);var p=(0,f.createClient)(d,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml3aXZiYXFpbmtudXJkYmtuZHJlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ5MTQ4NjIsImV4cCI6MjA1MDQ5MDg2Mn0.0nLLTcfPIajLEQYwsGPnzw_uApt2jDj_8VwYIn3_hq8",{auth:{storage:c.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1},realtime:{params:{eventsPerSecond:1}}}),h=r(6665),g=r(8514),b=r(5991),m=r(397);function v(){var e=(0,h.useState)(0),t=(0,o.default)(e,2),r=t[0],a=t[1],i=(0,h.useState)(null),u=(0,o.default)(i,2),c=u[0],f=u[1],d=(0,h.useState)("\ud83d\udd04 Connecting..."),b=(0,o.default)(d,2),v=b[0],j=b[1];function S(){return w.apply(this,arguments)}function w(){return(w=(0,n.default)((function*(){try{var e=yield p.from("counters").select("count").eq("id",1).single(),t=e.data,r=e.error;if(r)throw r;t&&(console.log("Count:",t.count),a(t.count))}catch(n){console.error("Error loading count:",n),f(n.message)}}))).apply(this,arguments)}function O(){return(O=(0,n.default)((function*(){try{a((function(e){return e+1})),f(null);var e=yield p.rpc("increment_counter",{row_id:1}),t=e.data,n=e.error;if(n)throw n;t!==r+1&&a(t)}catch(o){console.error("Error incrementing:",o),f(o.message),S()}}))).apply(this,arguments)}return(0,h.useEffect)((function(){console.log("Initializing channel..."),S();var e=p.channel("public:counters").on("postgres_changes",{event:"*",schema:"public",table:"counters"},(function(e){console.log("Change received:",e),e.new&&void 0!==e.new.count&&a(e.new.count)})).subscribe((function(t){switch(console.log("Subscription status:",t),t){case"SUBSCRIBED":j("\ud83d\udfe2 Connected");break;case"CHANNEL_ERROR":console.log("Channel error details:",e.state),j("\ud83d\udd34 Error");break;case"CLOSED":j("\u26aa Disconnected");break;default:j("\ud83d\udd04 Connecting...")}}));return function(){console.log("Cleaning up channel..."),p.removeChannel(e)}}),[]),(0,m.jsxs)(s.default,{style:y.container,children:[(0,m.jsxs)(l.default,{style:y.count,children:["Count: ",r]}),(0,m.jsx)(l.default,{style:y.status,children:v}),(0,m.jsx)(g.default,{title:"Increment",onPress:function(){return O.apply(this,arguments)}}),c&&(0,m.jsx)(l.default,{style:y.error,children:c})]})}var y=i.default.create({container:{alignItems:"center",gap:"ios"===b.default.OS?15:10},count:{fontSize:24,fontWeight:"ios"===b.default.OS?"600":"bold",marginBottom:10},status:{fontSize:12,color:"#666",marginBottom:10},error:{color:"red",fontWeight:"bold",marginTop:10}}),j=r(1494);function S(e){var t=e.error;return(0,m.jsxs)(s.default,{style:{flex:1,justifyContent:"center",alignItems:"center"},children:[(0,m.jsx)(l.default,{children:"Something went wrong:"}),(0,m.jsx)(l.default,{children:t.message})]})}function w(){var e=(0,h.useState)(!0),t=(0,o.default)(e,2),r=t[0],i=t[1],c=(0,h.useState)(null),f=(0,o.default)(c,2),d=(f[0],f[1]),g=(0,h.useState)(null),b=(0,o.default)(g,2),y=(b[0],b[1]),w=(0,h.useState)("Testing..."),C=(0,o.default)(w,2),k=(C[0],C[1]);return(0,h.useEffect)((function(){function e(){return(e=(0,n.default)((function*(){try{console.log("Initializing Supabase...");var e=yield p.auth.getSession(),t=e.data.session,r=e.error;if(r)throw r;return d(t),function(){}}catch(n){console.error("Supabase initialization error:",n),y(n.message)}finally{i(!1)}}))).apply(this,arguments)}console.log("App mounted"),function(){e.apply(this,arguments)}()}),[]),(0,h.useEffect)((function(){function e(){return(e=(0,n.default)((function*(){try{console.log("Testing Supabase connection...");var e=yield p.from("counters").select("count").limit(1),t=e.data,r=e.error;console.log("Supabase test response:",{data:t,error:r}),r?(k("\u274c Supabase Error"),console.error("Supabase connection error:",r)):k("\u2705 Connected")}catch(n){console.error("Network test error:",n),k("\u274c Network Error")}}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r?(0,m.jsx)(s.default,{style:O.container,children:(0,m.jsx)(u.default,{size:"large",color:"#0000ff"})}):(0,m.jsx)(j.ErrorBoundary,{FallbackComponent:S,children:(0,m.jsxs)(s.default,{style:[O.container,{pointerEvents:"auto"}],children:[(0,m.jsx)(l.default,{style:O.title,children:"React Native + Supabase Demo"}),(0,m.jsx)(v,{}),(0,m.jsx)(a.default,{style:"auto"})]})})}var O=i.default.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",gap:20},title:{fontSize:20,fontWeight:"bold",marginBottom:20},networkStatus:{fontSize:14,color:"#666",marginBottom:10},status:{fontSize:16,color:"#666"},error:{color:"red",fontSize:16}})}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(c=0;c<e.length;c++){for(var[n,o,a]=e[c],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(c--,1);var u=o();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,o,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".783bc47a.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";r.l=(n,o,a,i)=>{if(e[n])e[n].push(o);else{var l,s;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var f=u[c];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+a){l=f;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+a),l.src=n),e[n]=[o];var d=(t,r)=>{l.onerror=l.onload=null,clearTimeout(p);var o=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((e=>e(r))),t)return t(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=d.bind(null,l.onerror),l.onload=d.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/increment-button-web/",(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((r,n)=>o=e[t]=[r,n]));n.push(o[2]=a);var i=r.p+r.u(t),l=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,l,s]=n,u=0;if(i.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var c=s(r)}for(t&&t(n);u<i.length;u++)a=i[u],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[559],(()=>r(5036)));n=r.O(n)})();
//# sourceMappingURL=main.efef4dec.js.map